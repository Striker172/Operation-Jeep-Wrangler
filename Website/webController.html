<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Jeep Wrangler Web Controller</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://assets.ubuntu.com/v1/vanilla-framework-version-4.9.1.min.css" />
    </head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <body>
        <header id="navigation" class="p-navigation is-dark">
            <div class="p-navigation__row--25-75">
              <div class="p-navigation__banner">
                <div class="p-navigation__tagged-logo">
                  <a class="p-navigation__link" href="#">
                    <div class="p-navigation__logo-tag">
                      <img class="p-navigation__logo-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Jeep_logo.svg/640px-Jeep_logo.svg.png" alt="">
                    </div>
                    <span class="p-navigation__logo-title">Operarion Jeep Wrangler</span>
                  </a>
                </div>
              </div>
              <nav class="p-navigation__nav" aria-label="Example main">
                <ul class="p-navigation__items">
                  <li class="p-navigation__item is-selected">
                    <a class="p-navigation__link" href="#">Project Repo</a>
                  </li>
                  <li class="p-navigation__item">
                    <a class="p-navigation__link" href="#">Services</a>
                  </li>
                  <li class="p-navigation__item">
                    <a class="p-navigation__link" href="#">Partners</a>
                  </li>
                </ul>
              </nav>
            </div>
            <div class="p-navigation__search-overlay"></div>
        </header>

        <section class="p-section">
            <hr class="p-rule">
            <div class="p-card u-no-padding--bottom p-card u-no-padding--top">
                <div class="u-align--center">
                    Joystick: (x: <p id="xValue" style="display: inline-block;">0</p>, y: <p id="yValue" style="display: inline-block;">0</p>)
                </div>
            </div>
        <section>

        <script>
            var dir = "center";
            var dirX = 0;
            var dirY = 0;

            let key = {
                w: false,
                a: false,
                s: false,
                d: false,
            };

            document.addEventListener("keydown", event =>{

                if (event.key === "w") {
                    key.w = true;
                }
                
                if (event.key === "a") {
                    key.a = true;
                }

                if (event.key === "s") {
                  key.s = true;
                }

                if (event.key === "d") {
                  key.d = true;
                }

                if(key.w && key.d){
                    dirY += 1;
                    dirX += 1;
                }else if(key.w){
                    dirY += 1;
                }else if(key.d){
                    dirX += 1;
                }

                if(key.w && key.a){
                    dirY += 1;
                    dirX -= 1;
                }else if(key.a){
                    dirX -= 1;
                }

                if(key.s && key.d){
                    dirY -= 1;
                    dirX += 1;
                }else if(key.s){
                    dirY -= 1;
                }

                if(key.s && key.a){
                    dirY -= 1;
                    dirX -= 1;
                }
                
                document.getElementById("xValue").innerHTML = dirX;
                document.getElementById("yValue").innerHTML = dirY;
            });


            document.addEventListener("keyup", event =>{

                if (event.key === "w") {
                    key.w = false;
                }
                
                if (event.key === "a") {
                    key.a = false;
                }

                if (event.key === "s") {
                  key.s = false;
                }

                if (event.key === "d") {
                  key.d = false;
                }

                dirX = 0;
                dirY = 0;

                document.getElementById("xValue").innerHTML = dirX;
                document.getElementById("yValue").innerHTML = dirY;
            });

        </script>
        
        <script type="text/javascript">
            //*****WORK HERE*****
            function start(objButton) {
              var deviceID = "2b0041001247313137363331";
              var accessToken = "495de6d1976598285cd143cf31975e5b4558b80a";
              var baseURL = "https://api.particle.io/v1/devices/"
              var varName = "tempC_CLOUD"; // your cloud variable name goes here
        
        
              requestURL = baseURL + deviceID + "/" + varName + "/?access_token=" + accessToken;
              $.getJSON(requestURL, function(json) {
                document.getElementById("current_temp").innerHTML = json.result;
              });
           
              var varName = "cV_targetTemp";  // this is another cloud variable name
              requestURL = baseURL + deviceID + "/" + varName + "/?access_token=" + accessToken;
              $.getJSON(requestURL, function(json) {
                document.getElementById("desired_temp").innerHTML = json.result;
              });
            }
          </script>

    </body>
</html>